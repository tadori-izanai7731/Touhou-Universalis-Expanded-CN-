namespace = flavor_ymu

country_event = { # release youmu
	id = flavor_ymu.1
	title = flavor_ymu.1.t1
	desc = flavor_ymu.1.desc1
	picture = YOUMU_eventPicture
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = flavor_ymu.1.a1
	}
	option = {
		name = flavor_ymu.1.b1
		highlight = yes
		hidden_effect = {
			437 = {
				cede_province = ROOT
				add_core = YMU
				remove_core = ROOT
				remove_core = TRS
				remove_core = TIM
				change_religion = th_hakureishinto
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
				set_local_autonomy = 0
			}
			438 = {
				cede_province = ROOT
				add_core = YMU
				remove_core = ROOT
				remove_core = TRS
				remove_core = TIM
				change_religion = th_hakureishinto
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
				set_local_autonomy = 0
			}
			439 = {
				cede_province = ROOT
				add_core = YMU
				remove_core = ROOT
				remove_core = NOG
				change_religion = th_hakureishinto
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
				set_local_autonomy = 0
			}
			443 = {
				cede_province = ROOT
				add_core = YMU
				remove_core = ROOT
				remove_core = NOG
				change_religion = th_hakureishinto
				add_base_tax = 2
				add_base_production = 2
				add_base_manpower = 2
				set_local_autonomy = 0
			}
			2349 = {
				cede_province = ROOT
				add_core = YMU
				remove_core = ROOT
				remove_core = TRS
				remove_core = TIM
				change_religion = th_hakureishinto
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
				set_local_autonomy = 0
			}
			2362 = {
				cede_province = ROOT
				add_core = YMU
				remove_core = ROOT
				remove_core = TRS
				remove_core = TIM
				change_religion = th_hakureishinto
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
				set_local_autonomy = 0
			}
			2370 = {
				cede_province = ROOT
				add_core = YMU
				remove_core = ROOT
				remove_core = NOG
				change_religion = th_hakureishinto
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
				set_local_autonomy = 0
			}
		}
		release = YMU
		switch_tag = YMU
		hidden_effect = {
			YMU = {
				change_government = tribal
				add_government_reform = THE_steppe_youmu
				change_technology_group = tech_gensokyan
				change_unit_type = tech_gensokyan
				tartary_superregion {
					discover_country = YMU
				}
				far_east_superregion {
					discover_country = YMU
				}
				persia_superregion {
					discover_country = YMU
				}
				india_superregion {
					discover_country = YMU
				}
				eastern_europe_superregion {
					discover_country = YMU
				}
				adopt_reform_progress = ROOT
				change_primary_culture = ROOT
				change_religion = th_hakureishinto
				remove_country_modifier = conversion_zeal
				define_ruler = {
					name = "–Y¦h"	# Youmu
					dynasty = "B›D›"	# Konpaku
					age = 16
					adm = 5
					dip = 4
					mil = 5
					female = yes
					culture = ROOT
					religion = th_hakureishinto
				}
				set_ruler_flag = touhou_character_ruler
				set_ruler_flag = touhou_original_ruler
				set_ruler_flag = th_original_youmu
				add_ruler_personality = immortal_personality
				add_accepted_culture = nogaybak
				add_accepted_culture = turkmeni
				# add_ruler_modifier = {
				#	 name = ymu_loyalty_only_to_yuyuko
				#	 duration = -1
				# }
				add_adm_power = 200
				add_dip_power = 200
				add_mil_power = 200
				add_manpower = 15
				add_treasury = 150
				add_horde_unity = 87
				set_capital = 443
				capital_scope = {
					infantry = ROOT
					infantry = ROOT
					infantry = ROOT
					infantry = ROOT
					cavalry = ROOT
					cavalry = ROOT
					cavalry = ROOT
					cavalry = ROOT
					cavalry = ROOT
					cavalry = ROOT
				}
				swap_non_generic_missions = yes
				add_country_modifier = {
					name = THE_youmu_establish_estate_nomadic_tribes
					duration = 30
				}
				country_event = {
					id = flavor_ymu.2
					days = 3
				}
			}
		}
		ai_chance = {
			factor = 0
		}
	}
}

country_event = { # introduction & initialization
	id = flavor_ymu.2
	title = flavor_ymu.2.t1
	desc = flavor_ymu.2.desc1
	picture = YOUMU_eventPicture
	fire_only_once = yes
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		hidden_effect = {
			change_estate_land_share = {
				estate = estate_nomadic_tribes
				share = 70 
			}
		}
	}
	option = {
		name = flavor_ymu.2.a1
	}
	# TODO: human & ghost balance
}

country_event = { # unlock church
	id = flavor_ymu.3
	title = flavor_ymu.3.t
	desc = flavor_ymu.3.desc
	picture = YOUMU_eventPicture
	fire_only_once = yes
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = flavor_ymu.3.a
		trigger = {
			THE_YMU_unlock_estate_option_a_trigger = {
				event_id = 3
			}
		}
		THE_YMU_unlock_estate_option_a = {
			estate = estate_church
			event_id = 3
		}
	}
	option = {
		name = flavor_ymu.3.b
		trigger = {
			THE_YMU_unlock_estate_option_b_trigger = {
				event_id = 3
			}
		}
		THE_YMU_unlock_estate_option_b = {
			estate = estate_church
			event_id = 3
		}
	}
	option = {
		name = flavor_ymu.3.c
		trigger = {
			THE_YMU_unlock_estate_option_c_trigger = {
				event_id = 3
			}
		}
		THE_YMU_unlock_estate_option_c = {
			estate = estate_church
			event_id = 3
		}
	}
	after = {
		THE_YMU_unlock_estate_after_effect = {
			event_id = 3
		}
	}
}

country_event = { # unlock dhimmi
	id = flavor_ymu.4
	title = flavor_ymu.4.t
	desc = flavor_ymu.4.desc
	picture = YOUMU_eventPicture
	fire_only_once = yes
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = flavor_ymu.4.a
		trigger = {
			THE_YMU_unlock_estate_option_a_trigger = {
				event_id = 4
			}
		}
		THE_YMU_unlock_estate_option_a = {
			estate = estate_dhimmi
			event_id = 4
		}
	}
	option = {
		name = flavor_ymu.4.b
		trigger = {
			THE_YMU_unlock_estate_option_b_trigger = {
				event_id = 4
			}
		}
		THE_YMU_unlock_estate_option_b = {
			estate = estate_dhimmi
			event_id = 4
		}
	}
	option = {
		name = flavor_ymu.4.c
		trigger = {
			THE_YMU_unlock_estate_option_c_trigger = {
				event_id = 4
			}
		}
		THE_YMU_unlock_estate_option_c = {
			estate = estate_dhimmi
			event_id = 4
		}
	}
	after = {
		THE_YMU_unlock_estate_after_effect = {
			event_id = 4
		}
	}
}

country_event = { # unlock cossacks
	id = flavor_ymu.5
	title = flavor_ymu.5.t
	desc = flavor_ymu.5.desc
	picture = YOUMU_eventPicture
	fire_only_once = yes
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = flavor_ymu.5.a
		trigger = {
			THE_YMU_unlock_estate_option_a_trigger = {
				event_id = 5
			}
		}
		THE_YMU_unlock_estate_option_a = {
			estate = estate_cossacks
			event_id = 5
		}
	}
	option = {
		name = flavor_ymu.5.b
		trigger = {
			THE_YMU_unlock_estate_option_b_trigger = {
				event_id = 5
			}
		}
		THE_YMU_unlock_estate_option_b = {
			estate = estate_cossacks
			event_id = 5
		}
	}
	option = {
		name = flavor_ymu.5.c
		trigger = {
			THE_YMU_unlock_estate_option_c_trigger = {
				event_id = 5
			}
		}
		THE_YMU_unlock_estate_option_c = {
			estate = estate_cossacks
			event_id = 5
		}
	}
	after = {
		THE_YMU_unlock_estate_after_effect = {
			event_id = 5
		}
	}
}

country_event = { # unlock nobles
	id = flavor_ymu.6
	title = flavor_ymu.6.t
	desc = flavor_ymu.6.desc
	picture = YOUMU_eventPicture
	fire_only_once = yes
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = flavor_ymu.6.a
		trigger = {
			THE_YMU_unlock_estate_option_a_trigger = {
				event_id = 6
			}
		}
		THE_YMU_unlock_estate_option_a = {
			estate = estate_nobles
			event_id = 6
		}
	}
	option = {
		name = flavor_ymu.6.b
		trigger = {
			THE_YMU_unlock_estate_option_b_trigger = {
				event_id = 6
			}
		}
		THE_YMU_unlock_estate_option_b = {
			estate = estate_nobles
			event_id = 6
		}
	}
	option = {
		name = flavor_ymu.6.c
		trigger = {
			THE_YMU_unlock_estate_option_c_trigger = {
				event_id = 6
			}
		}
		THE_YMU_unlock_estate_option_c = {
			estate = estate_nobles
			event_id = 6
		}
	}
	after = {
		THE_YMU_unlock_estate_after_effect = {
			event_id = 6
		}
	}
}

country_event = { # unlock burghers
	id = flavor_ymu.7
	title = flavor_ymu.7.t
	desc = flavor_ymu.7.desc
	picture = YOUMU_eventPicture
	fire_only_once = yes
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = flavor_ymu.7.a
		trigger = {
			THE_YMU_unlock_estate_option_a_trigger = {
				event_id = 7
			}
		}
		THE_YMU_unlock_estate_option_a = {
			estate = estate_burghers
			event_id = 7
		}
	}
	option = {
		name = flavor_ymu.7.b
		trigger = {
			THE_YMU_unlock_estate_option_b_trigger = {
				event_id = 7
			}
		}
		THE_YMU_unlock_estate_option_b = {
			estate = estate_burghers
			event_id = 7
		}
	}
	option = {
		name = flavor_ymu.7.c
		trigger = {
			THE_YMU_unlock_estate_option_c_trigger = {
				event_id = 7
			}
		}
		THE_YMU_unlock_estate_option_c = {
			estate = estate_burghers
			event_id = 7
		}
	}
	after = {
		THE_YMU_unlock_estate_after_effect = {
			event_id = 7
		}
	}
}